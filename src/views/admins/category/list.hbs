<div class="admin-wrapper">
  
  <div class="admin-header">
    <h1 class="admin-title">
      
      Category Management
    </h1>
    <a href="/admins/categories/add" class="btn-add-category">
      <i class="bi bi-plus-circle"></i> Add New
    </a>
  </div>
  <!-- Stats Cards -->
  <div class="row mb-4">
    <div class="col-md-3">
      <div class="stat-card primary">
        <i class="bi bi-folder"></i>
        <div>
          <h3>{{categories.length}}</h3>
          <p>Total Categories</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Beautiful Table -->
  <div class="table-container">
    <div class="table-responsive">
      <table class="admin-table">
        <thead>
          <tr>
            <th><i class="bi bi-hash"></i></th>
            <th><i class="bi bi-tag"></i> Name</th>
            <th><i class="bi bi-folder2"></i> Parent</th>
            <th><i class="bi bi-book"></i> Courses</th>
            <th><i class="bi bi-gear"></i></th>
          </tr>
        </thead>
        <tbody>
          {{#each categories}}
          <tr class="table-row">
            <td class="id">{{id}}</td>
            <td class="name">
              <i class="bi bi-circle-fill text-primary me-2"></i>
              {{name}}
            </td>
            <td class="parent">
              {{#if parent_name}}
                <span class="badge bg-success">{{parent_name}}</span>
              {{else}}
                <span class="badge bg-secondary">Root</span>
              {{/if}}
              </td>
              <td class="courses">
  {{#if course_count}}
    <span class="badge bg-primary">{{course_count}}</span>
  {{else}}
    <span class="badge bg-light text-dark">0</span>
  {{/if}}
            </td>
            <td class="actions">
              <a href="/admins/categories/edit/{{id}}" class="btn-action edit" title="Edit">
                <i class="bi bi-pencil"></i>
              </a>
              <form action="/admins/categories/delete/{{id}}" method="POST" class="delete-form">
                <input type="hidden" name="_csrf" value="{{../csrfToken}}">
                <button type="submit" class="btn-action delete" title="Delete"
                  onclick="return confirm('Delete {{name}}?')">
                  <i class="bi bi-trash"></i>
                </button>
              </form>
            </td>
          </tr>
          {{else}}
          <tr>
            <td colspan="4" class="empty-state">
              <i class="bi bi-folder-x"></i>
              <p>No categories yet. <a href="/admins/categories/add">Create one!</a></p>
            </td>
          </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  </div>
</div>

<style>
.admin-wrapper { padding: 20px 100px; }
.admin-header { 
  background: linear-gradient(135deg, var(--accent-color) 0%, color-mix(in srgb, var(--accent-color), black 20%) 100%); 
  color: var(--contrast-color); padding: 15px 20px; 
  border-radius: 12px; margin-bottom: 20px; 
  display: flex; justify-content: space-between; align-items: center;
}
.admin-title { margin: 0; font-size: 1.5rem; font-weight: 600; color: var(--contrast-color); }
.btn-add-category { 
  background: rgba(255,255,255,0.2); border: 1px solid var(--contrast-color); 
  color: var(--contrast-color); padding: 8px 16px; 
  border-radius: 20px; text-decoration: none; font-size: 0.9rem;
  transition: all 0.3s; 
}
.btn-add-category:hover { background: var(--contrast-color); color: var(--accent-color); }

.stat-card { 
  background: var(--surface-color); padding: 15px; 
  border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.08); 
  display: flex; align-items: center; gap: 10px; 
}
.stat-card i { font-size: 1.5rem; color: var(--accent-color); }
.stat-card h3 { margin: 0; font-size: 1.5rem; color: var(--heading-color); }
.stat-card p { margin: 0; color: var(--default-color); font-size: 0.9rem; }

.table-container { 
  background: var(--surface-color); border-radius: 12px; 
  overflow: hidden; box-shadow: 0 5px 20px rgba(0,0,0,0.08); 
}
.admin-table { 
  width: 100%; border-collapse: collapse; 
  table-layout: fixed; 
}
.admin-table th { 
  background: color-mix(in srgb, var(--background-color), var(--accent-color) 5%); padding: 12px 10px; 
  text-align: left; font-weight: 600; color: var(--heading-color); font-size: 0.9rem;
  width: 25%; 
}
.admin-table td { 
  padding: 12px 10px; border-bottom: 1px solid color-mix(in srgb, var(--default-color), transparent 90%); font-size: 0.9rem;
  vertical-align: middle; 
}
.table-row:hover { background: color-mix(in srgb, var(--background-color), var(--accent-color) 5%); }
.id { font-weight: 600; color: color-mix(in srgb, var(--default-color), transparent 50%); width: 10%; }
.name { width: 40%; } 
.parent { width: 25%; }
.actions { width: 25%; text-align: center; } 
.btn-action { 
  width: 32px; height: 32px; border-radius: 50%; 
  margin: 0 2px; font-size: 0.9rem; 
  display: inline-flex; align-items: center; justify-content: center;
}
.btn-action.edit { background: var(--accent-color); color: var(--contrast-color); }
.btn-action.edit:hover { background: color-mix(in srgb, var(--accent-color), black 20%); transform: scale(1.1); }
.btn-action.delete { background: #dc3545; color: var(--contrast-color); }
.btn-action.delete:hover { background: #c82333; transform: scale(1.1); }
.delete-form { display: inline; margin: 0; }
.empty-state { text-align: center; padding: 30px; color: var(--default-color); }
.empty-state i { font-size: 3rem; margin-bottom: 10px; }

@media (max-width: 768px) {
  .admin-header { flex-direction: column; gap: 10px; text-align: center; padding: 12px; }
  .admin-table th, .admin-table td { padding: 8px 6px; font-size: 0.85rem; }
  .actions { text-align: center; }
}
</style>